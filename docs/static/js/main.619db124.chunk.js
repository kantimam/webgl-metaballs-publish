(this["webpackJsonpmetaball-example"]=this["webpackJsonpmetaball-example"]||[]).push([[0],{10:function(t,o,i){},11:function(t,o,i){"use strict";i.r(o);var e=i(0),n=i.n(e),r=i(4),a=i.n(r),s=(i(10),i(1)),l=i(2),c=function(t,o,i,e,n,r,a){t.positionX>i&&2!=t.lastCollision&&(t.lastCollision=2,r(t)),t.positionX<n&&4!=t.lastCollision&&(t.lastCollision=4,r(t)),t.positionY>e&&3!=t.lastCollision&&(t.lastCollision=3,a(t)),t.positionY<o&&1!=t.lastCollision&&(t.lastCollision=1,a(t))},h=function(t,o){return Math.floor(Math.random()*(o-t))+t},f=function(t,o,i){var e=t.createShader(o);if(t.shaderSource(e,i),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS))return e;console.log(t.getShaderInfoLog(e)),t.deleteShader(e)},u=function(t,o,i){var e=t.createProgram();if(t.attachShader(e,o),t.attachShader(e,i),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS))return e;console.log(t.getProgramInfoLog(e)),t.deleteProgram(e)},m=function(){function t(o,i,e,n,r,a,l,c){Object(s.a)(this,t),this.size=void 0,this.positionX=void 0,this.positionY=void 0,this.colorR=void 0,this.colorG=void 0,this.colorB=void 0,this.moveX=void 0,this.moveY=void 0,this.lastCollision=0,this.size=o,this.positionX=i,this.positionY=e,this.moveX=l,this.moveY=c,this.colorR=n,this.colorG=r,this.colorB=a}return Object(l.a)(t,[{key:"updatePosition",value:function(){this.positionX+=this.moveX,this.positionY+=this.moveY}},{key:"reflectX",value:function(){this.moveX*=-1}},{key:"reflectY",value:function(){this.moveY*=-1}},{key:"deflectMovementY",value:function(t,o){this.moveY=this.moveY>0?h(t,o):-1*h(t,o)}},{key:"deflectMovementX",value:function(t,o){this.moveX=this.moveX>0?h(t,o):-1*h(t,o)}},{key:"shiftColor",value:function(t,o){this.colorR=(this.colorR+h(t,o))%255,this.colorG=(this.colorG+h(t,o))%255,this.colorB=(this.colorB+h(t,o))%255}}]),t}(),v=function(){function t(o,i,e,n,r){var a=this;Object(s.a)(this,t),this.canvasRef=void 0,this.containerRef=void 0,this.orbSettings=void 0,this.orbCount=void 0,this.orbArray=[],this.onCollisionX=function(t){t.reflectX()},this.onCollisionY=function(t){t.reflectY()},this.gl=void 0,this.shaderProgram=null,this.renderLoop=void 0,this.lastContainerWidth=void 0,this.lastContainerHeight=void 0,this.containIn={top:0,right:0,bottom:0,left:0},this.setDynamicLength=function(t,o){return t.replace(/<DYNAMIC_LENGTH>/,String(6*o)).replace(/<ORBCOUNT=0>/,"ORBCOUNT=".concat(o))},this.setPositionInBounds=function(){a.orbArray.forEach((function(t){t.positionX=Math.floor(t.positionX/a.lastContainerWidth*a.containerRef.clientWidth)+a.containerRef.offsetLeft,t.positionY=Math.floor(t.positionY/a.lastContainerHeight*a.containerRef.clientHeight)+a.containerRef.offsetTop})),a.lastContainerWidth=a.canvasRef.clientWidth,a.lastContainerHeight=a.canvasRef.clientHeight},this.u_orbDataFromArray=function(t){for(var o=[],i=0;i<t.length;i++)o.push(t[i].size),o.push(t[i].positionX),o.push(t[i].positionY),o.push(t[i].colorR/255),o.push(t[i].colorG/255),o.push(t[i].colorB/255);return o},this.updateOrbs=function(){a.orbArray.forEach((function(t){t.updatePosition(),c(t,a.containIn.top,a.containIn.right,a.containIn.bottom,a.containIn.left,a.onCollisionX,a.onCollisionY)}))},this.render=function(){if(a.gl&&a.shaderProgram){var t=a.gl.getAttribLocation(a.shaderProgram,"a_position"),o=a.gl.createBuffer();a.gl.bindBuffer(a.gl.ARRAY_BUFFER,o),a.gl.bufferData(a.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a.gl.STATIC_DRAW),a.gl.useProgram(a.shaderProgram);var i=a.gl.getUniformLocation(a.shaderProgram,"u_resolution"),e=a.gl.getUniformLocation(a.shaderProgram,"u_orbData"),n=a.gl.getUniformLocation(a.shaderProgram,"u_distanceModifier");a.gl.uniform1f(n,5),a.gl.uniform2fv(i,[a.canvasRef.clientWidth,a.canvasRef.clientHeight]),a.gl.enableVertexAttribArray(t),a.gl.bindBuffer(a.gl.ARRAY_BUFFER,o);var r=a.gl.FLOAT;a.gl.vertexAttribPointer(t,2,r,!1,0,0),a.gl.viewport(0,0,a.canvasRef.width,a.canvasRef.height),a.gl.clearColor(0,0,0,0),a.gl.clear(a.gl.COLOR_BUFFER_BIT),window.onresize=function(){a.gl&&(a.setCanvasDim(),a.setPositionInBounds(),a.gl.uniform2fv(i,[a.canvasRef.clientWidth,a.canvasRef.clientHeight]),a.gl.viewport(0,0,a.gl.drawingBufferWidth,a.gl.drawingBufferHeight))};!function t(o){a.updateOrbs(),o.uniform1fv(e,a.u_orbDataFromArray(a.orbArray)),o.drawArrays(o.TRIANGLES,0,6),a.renderLoop=requestAnimationFrame((function(){return t(o)}))}(a.gl)}},this.destroy=function(){a.gl&&(cancelAnimationFrame(a.renderLoop),a.gl.deleteProgram(a.shaderProgram))},this.canvasRef=o,this.orbSettings=r,this.orbCount=r?r.length:h(2,10),this.gl=o.getContext("webgl"),this.lastContainerWidth=i.clientWidth,this.lastContainerHeight=i.clientHeight,this.containerRef=i,e&&n?(this.onCollisionX=function(t){t.reflectX(),t.deflectMovementX(e.min,e.max),t.shiftColor(n.min,n.max)},this.onCollisionY=function(t){t.reflectY(),t.deflectMovementY(e.min,e.max),t.shiftColor(n.min,n.max)}):e?(this.onCollisionX=function(t){t.reflectX(),t.deflectMovementX(e.min,e.max)},this.onCollisionY=function(t){t.reflectY(),t.deflectMovementY(e.min,e.max)}):n&&(this.onCollisionX=function(t){t.reflectX(),t.shiftColor(n.min,n.max)},this.onCollisionY=function(t){t.reflectY(),t.shiftColor(n.min,n.max)})}return Object(l.a)(t,[{key:"setCanvasDim",value:function(){this.canvasRef.width=this.canvasRef.clientWidth,this.canvasRef.height=this.canvasRef.clientHeight;var t=this.containerRef,o=t.offsetTop,i=t.offsetLeft,e=t.clientWidth,n=t.clientHeight;this.containIn.bottom=this.canvasRef.clientHeight-o,this.containIn.right=i+e,this.containIn.top=this.canvasRef.clientHeight-o-n,this.containIn.left=i}},{key:"create",value:function(){if(this.canvasRef){this.setCanvasDim(),this.createOrbs();var t=this.setDynamicLength("\n\nprecision mediump float;\nconst int <ORBCOUNT=0>;\n\nuniform float u_time;\nuniform vec2 u_resolution;\n\nuniform float u_orbData[<DYNAMIC_LENGTH>];\n\nfloat aspectRatio=u_resolution.x / u_resolution.y;\n\nuniform float u_distanceModifier;\n\nvec3 getColSum(vec2 uv){\n    vec3 sumColor=vec3(0.0);\n\n    for(int i=0; i<ORBCOUNT; i++){\n        vec2 normBallPos=vec2(u_orbData[6*i+1], u_orbData[6*i+2]);\n        float ballDistance=distance(normBallPos, uv);\n        float multDist=ballDistance / u_distanceModifier;\n\n        float distRadius=u_orbData[6*i] / multDist;\n\n        sumColor+=vec3(distRadius*vec3(u_orbData[6*i+3], u_orbData[6*i+4], u_orbData[6*i+5]));\n    }\n    \n    return (sumColor / float(ORBCOUNT));\n\n}\n\nvoid main() {\n    gl_FragColor = vec4(getColSum(gl_FragCoord.xy), 1.0);\n}\n\n",this.orbCount);this.shaderProgram=function(t,o,i){var e=f(t,t.VERTEX_SHADER,o),n=f(t,t.FRAGMENT_SHADER,i);return u(t,e,n)}(this.gl,"\nprecision mediump float;\nattribute vec4 a_position;\n\nvoid main() {\n    gl_Position = a_position;\n}\n\n",t)}else console.log("no reference to the canvas was found")}},{key:"createOrbs",value:function(){var t=this;this.orbArray=[];var o=this.containIn,i=o.top,e=o.right,n=o.bottom,r=o.left;if(this.orbSettings&&this.orbSettings.length>0)return this.orbSettings.forEach((function(o,a){t.orbArray[a]=new m(o.size||h(4,60),o.posX&&o.posX>r&&o.posX<e?o.posX:h(r,e),o.posY&&o.posY>i&&o.posY<n?o.posY:h(i,n),o.colorR||h(0,255),o.colorG||h(0,255),o.colorB||h(0,255),o.moveX||h(1,5),o.moveY||h(1,5))}));for(var a=0;a<this.orbCount;a++)this.orbArray[a]=new m(h(4,60),h(r,e),h(i,n),h(0,255),h(0,255),h(0,255),h(1,5),h(1,5))}}]),t}(),d=e.createElement("div",{className:"metaBalls-innerContainer",style:{width:"100%",height:"100%"}}),g=function(t){var o=t.orbData,i=t.innerContainer,n=void 0===i?d:i,r=t.children,a=t.childContainerFlex,s=t.shiftColor,l=t.deflectMovement,c=Object(e.useRef)(null),h=Object(e.useRef)(null);return Object(e.useLayoutEffect)((function(){var t;return c.current&&h.current&&((t=new v(c.current,h.current,l,s,o)).create(),t.render()),function(){t&&t.destroy()}}),[]),e.createElement("div",{id:"metaballContainer",style:{width:"100%",height:"100%",position:"relative",overflow:"hidden"}},e.createElement("canvas",{ref:c,style:{width:"100%",height:"100%",position:"absolute",left:0,top:0}}),e.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"flex",flexDirection:a||"row"}},e.cloneElement(n,{ref:h},null),"  ",e.createElement("div",{style:a?{height:"100%",flex:1}:{width:"100%",height:"100%",position:"absolute",left:0,top:0}},r," ")))};var p=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(g,{shiftColor:{min:10,max:60},deflectMovement:{min:1,max:7}},n.a.createElement("div",{className:"contentDiv"},"LET US BULLY YOUR GPU :)")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(n.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},5:function(t,o,i){t.exports=i(11)}},[[5,1,2]]]);
//# sourceMappingURL=main.619db124.chunk.js.map